(this.webpackJsonpcoroviz=this.webpackJsonpcoroviz||[]).push([[0],{237:function(e,t,a){e.exports=a(376)},242:function(e,t,a){},243:function(e,t,a){},376:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(189),o=a.n(r),s=(a(242),a(12)),l=a(10),c=a(27),d=a(28),u=(a(243),a(190)),h=a(40),m=function(e,t,a,n){var i=Math.pow(2,1/a),r=Math.log(t)/Math.log(i)-Math.log(n)/Math.log(i);return r<=e?{x:r,y:t}:{x:e,y:n*Math.pow(i,e)}},p=function(e){var t=e.lineGenerator,a=e.xScale,n=e.yScale,r=e.axisLeft,o=e.category,s=r.tickValues,l="confirmed cases"===o?100:10;return[{id:["Doubles","Every Day"],data:[{x:0,y:n.domain()[0]},m(a.domain()[1],s[s.length-1],1,l)]},{id:["...Every","3 Days"],data:[{x:0,y:n.domain()[0]},m(a.domain()[1],s[s.length-1],3,l)]},{id:["...Every","Week"],data:[{x:0,y:n.domain()[0]},m(a.domain()[1],s[s.length-1],7,l)]}].map((function(e){var r=e.id,o=e.data;return i.a.createElement("g",{key:r[1]},i.a.createElement("text",{fontSize:"smaller",textAnchor:"middle",fill:"black",x:a(o[o.length-1].x),y:n(o[o.length-1].y)-20},r[0]),i.a.createElement("text",{fontSize:"smaller",textAnchor:"middle",fill:"black",x:a(o[o.length-1].x),y:n(o[o.length-1].y)-5},r[1]),i.a.createElement("path",{d:t(o.map((function(e){return{x:a(e.x),y:n(e.y)}}))),fill:"none",stroke:"black",style:{strokeDasharray:"8, 4",strokeWidth:1}}))}))},g=function(e){var t=e.series;e.xScale,e.yScale,e.innerHeight;return i.a.createElement("g",null,t.map((function(e){return i.a.createElement("circle",{key:e.id+"-circle",id:e.id,cx:e.data[e.data.length-1].position.x,cy:e.data[e.data.length-1].position.y,r:4,stroke:"black",fill:e.color})})))},f=function(e){var t=e.series;e.xScale,e.yScale,e.innerHeight;return i.a.createElement("g",null,t.map((function(e){return i.a.createElement("g",{key:e.id+"textLayer",id:e.id},i.a.createElement("filter",{id:"outline"},i.a.createElement("feMorphology",{in:"SourceAlpha",result:"DILATED",operator:"dilate",radius:"2"})),i.a.createElement("text",{filter:"url(#outline)",fontWeight:"bold",fontSize:"smaller",fill:"black",x:e.data[e.data.length-1].position.x+5,y:e.data[e.data.length-1].position.y-5},e.id),i.a.createElement("text",{fontWeight:"bold",fontSize:"smaller",fill:e.color,x:e.data[e.data.length-1].position.x+5,y:e.data[e.data.length-1].position.y-5},e.id))})))},y=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){for(var e=this,t=h.c(this.props.data.map((function(e){return e.data.length}))),a=h.c(this.props.data.map((function(e){return e.data[e.data.length-1].y}))),n=2;a>Math.pow(10,n);)n++;a=Math.pow(10,n);for(var r=[10,20,50,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5,2e5,5e5,1e6],o=(r="confirmed cases"===this.props.category?r.slice(3):r).length-1;o>3;o--)r[o]>a&&r.pop();return i.a.createElement(u.a,{data:this.props.data,margin:{top:50,right:50,bottom:50,left:70},xScale:{type:"linear",max:t>10?t:10},yScale:{type:"log",base:10,stacked:!1,min:"auto",max:a},category:this.props.category,layers:["grid","markers","areas","slices","axes","crosshair","slices","mesh","lines",p,g,f],axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:"days since "+r[0]+" "+this.props.category,itemTextColor:"black",legendOffset:36,legendPosition:"middle"},axisLeft:{orient:"left",tickValues:r,format:function(e){return e.toLocaleString()},tickPadding:5,tickRotation:0,legend:"count",legendOffset:-55,legendPosition:"middle"},colors:{scheme:"nivo"},pointSize:3,pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-12,enableGridY:!1,gridYValues:r,enableGridX:!1,enableCrosshair:!0,useMesh:!0,onClick:function(e,t){console.log(e,t)},tooltip:function(t){return i.a.createElement("div",{style:{backgroundColor:"whitesmoke",borderRadius:"5px",padding:"10px"}},i.a.createElement("strong",{style:{color:"black"}},t.point.serieId),i.a.createElement("svg",{height:15,width:15,style:{marginLeft:10}},i.a.createElement("rect",{x:0,y:0,fill:t.point.color,width:15,height:15})),i.a.createElement("div",{style:{marginTop:"1em",marginBottom:0}},"Days: ",i.a.createElement("strong",null,t.point.data.x)),i.a.createElement("p",{style:{marginTop:0}},"confirmed cases"===e.props.category?"Cases":"Deaths",": ",i.a.createElement("strong",null,t.point.data.y.toLocaleString())))},theme:{textColor:"black",fontSize:11,axis:{ticks:{line:{stroke:"black"},text:{fill:"black"}}},grid:{line:{stroke:"#101010",strokeWidth:2,strokeDasharray:"4 4"}}},legends:[{anchor:"bottom",direction:"row",justify:!1,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",itemTextColor:"black",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]})}}]),a}(n.Component),v=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"stats"},i.a.createElement("div",{id:"confirmed",onClick:function(){return e.props.onClick("confirmed cases")}},i.a.createElement("div",{className:"confirmed cases"===this.props.category?"active":""},"Confirmed"),i.a.createElement("div",{className:"confirmed cases"===this.props.category?"underline active":"underline"}),i.a.createElement("div",null,this.props.totalCases.toLocaleString())),i.a.createElement("div",{id:"deaths",style:{marginLeft:"3em"},onClick:function(){return e.props.onClick("deaths")}},i.a.createElement("div",{className:"deaths"===this.props.category?"active":""},"Deaths"),i.a.createElement("div",{className:"deaths"===this.props.category?"underline active":"underline"}),i.a.createElement("div",null,this.props.totalDeaths.toLocaleString())))}}]),a}(n.Component),E=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleFilter=function(e){n.setState({filterString:e.target.value}),n.props.onChange(e.target.value)},n.state={filterString:""},n}return Object(l.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"filter"},"Filter by location: "),i.a.createElement("input",{style:{marginLeft:"1em"},type:"text",id:"filter",value:this.state.filterString,onChange:this.handleFilter,placeholder:"Search.."}))}}]),a}(n.Component),b=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={headlines:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.b("https://www.pcsalesapp.com/corona/3141").then((function(t){var a=e.state;a.headlines=t.data,e.setState(a)}))}},{key:"render",value:function(){return this.state.headlines.length>0?i.a.createElement("div",{style:{marginBottom:"5em"}},this.state.headlines.slice(0,10).map((function(e){return i.a.createElement("div",{key:e.link},i.a.createElement("a",{href:e.link},e.title),i.a.createElement("div",{className:"snippet"},"("+e.time+")  "+e.snippet+" "+e.displayLink))}))):i.a.createElement("div",null,"Updating Headlines")}}]),a}(n.Component),C=["US","Italy","Spain","France","Germany","United Kingdom","Iran","Switzerland","Turkey","Netherlands","Japan","Brazil","India","Taiwan*","Singapore","Canada","Mexico","Finland","Russia"],x="https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv",k="https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv",S=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={casedata:[],deathdata:[],countries:[],displayCountries:[],totalCases:"Loading",totalDeaths:"Loading",category:"confirmed cases",since_x:100,updated:"Pending",loading:!1},n.handleFilter=function(e){var t=[];e.split(",").forEach((function(e){n.state.countries.forEach((function(a){e.trim().length>0&&a.toUpperCase().startsWith(e.trim().toUpperCase())&&t.push(a)}))}));var a=n.state;e.length>0?a.displayCountries=t:a.displayCountries=C,n.setState({mystate:a})},n.clickHandler=function(e){var t=n.state;t.category=e,t.since_x="confirmed cases"===e?100:10,n.setState({mystate:t})},console.log("App - Constructor"),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),h.a(x).then((function(t){var a=t.columns[t.columns.length-1],n=t.columns.slice(4),i=0,r=Array.from(new Set(t.map((function(e){return i+=Number(e[a]),"Diamond Princess"!==e["Country/Region"]?e["Country/Region"]:null})))),o=[];r.forEach((function(e){var a={id:e,color:"rgba(0,255,0,0.3)",data:[],opacity:1};n.forEach((function(n){var i=t.filter((function(t){return t["Country/Region"]===e})).reduce((function(e,t){return e+Number(t[n])}),0);return i>100?a.data.push(i):null})),a.data=a.data.map((function(e,t){return{x:t,y:e}})),a.data.length>0&&o.push(a)})),r=Array.from(new Set(o.map((function(e){return e.id}))));var s=e.state;s.casedata=o,s.totalCases=i,s.countries=r,s.displayCountries=C,s.updated=a,e.setState({mystate:s}),console.log("finished loading confirmed cases")})),h.a(k).then((function(t){var a=[],n=t.columns.slice(4),i=e.state,r=t.reduce((function(e,a){return e+Number(a[t.columns[t.columns.length-1]])}),0);i.countries.forEach((function(e){var i={id:e,color:"rgba(0,255,0,0.3)",data:[],opacity:1};n.forEach((function(a){var n=t.filter((function(t){return t["Country/Region"]===e})).reduce((function(e,t){return e+Number(t[a])}),0);return n>10?i.data.push(n):null})),i.data=i.data.map((function(e,t){return{x:t,y:e}})),i.data.length>0&&a.push(i)})),i.deathdata=a,i.totalDeaths=r,i.loading=!1,e.setState({mystate:i}),console.log("finished loading deaths")})),console.log("App - Mounted")}},{key:"render",value:function(){var e=this;return console.log("App - Rendered"),i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,"Coronavirus Data Visualization"),i.a.createElement(v,{onClick:this.clickHandler,category:this.state.category,totalCases:this.state.totalCases,totalDeaths:this.state.totalDeaths}),i.a.createElement("div",null,i.a.createElement("h3",null,"Country by country: how covid-19 case trajectories compare"),i.a.createElement("div",null,"Cumulative number of ",this.state.category,", by number of days since"," ",this.state.since_x,"th"," ","confirmed cases"===this.state.category?"case":"death","."),i.a.createElement("div",null,"Data updated: ",this.state.updated)),i.a.createElement("div",{className:"chartContainer",style:{backgroundColor:"transparent"}},"confirmed cases"===this.state.category&&this.state.casedata.length&&this.state.displayCountries.length?i.a.createElement(y,{data:this.state.casedata.filter((function(t){return e.state.displayCountries.includes(t.id)})),category:this.state.category}):"deaths"===this.state.category&&this.state.deathdata.filter((function(t){return e.state.displayCountries.includes(t.id)})).length>0&&this.state.displayCountries.length?i.a.createElement(y,{data:this.state.deathdata.filter((function(t){return e.state.displayCountries.includes(t.id)})),category:this.state.category}):i.a.createElement("div",{style:{color:"black",padding:"100px"}},"No countries found.")),i.a.createElement(E,{style:{color:"black"},onChange:this.handleFilter}),i.a.createElement("p",null,"Use commas to display multiple countries. For example, to show Argentina, Brazil, and Chile, you can search for: arg, bra, chil"),i.a.createElement("h1",null,"Headlines"),i.a.createElement(b,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[237,1,2]]]);
//# sourceMappingURL=main.94ec9117.chunk.js.map
